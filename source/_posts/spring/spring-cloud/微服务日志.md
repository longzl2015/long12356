---

title: 微服务日志

date: 2019-03-14 14:43:00

categories: [spring,springcloud,logging]

tags: [spring,springcloud,logging]

---


微服务架构将一个工程拆分成了若干个微服务，这时就是增加 error 追踪的难度。


<!--more-->


比较流行的解决方案如下:

1. 对于每个浏览器用户的请求，生成一个全局唯一的 `traceId`。
2. 将每个微服务的日志写到本地的指定目录。(减少应用的开销)
3. 有一个服务专门将本地的日志发送到一个日志中心。

目前比较热门的是使用 ELK 架构。


通常建议微服务的日志内容应该包含如下内容:

- 当前时间
- 错误堆栈
- 生成上述错误堆栈的微服务名称
- 发生错误的文件名、类名和方法名
- 与之交互的微服务名称
- 服务器和客户端的IP
- 浏览器的 user-agent
- httpCode
- traceId




## 参考

[MICROSERVICES LOGGING BEST PRACTICES](https://www.scalyr.com/blog/microservices-logging-best-practices)
[Monitoring containerized microservices with a centralized logging architecture.](https://hackernoon.com/monitoring-containerized-microservices-with-a-centralized-logging-architecture-ba6771c1971a)
