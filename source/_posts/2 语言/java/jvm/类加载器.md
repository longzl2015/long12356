---
title: 类加载器
tags: ["类加载器"]
---

[TOC]

<!--more-->

## 类与类加载器

类的唯一性是由类本身和加载他的类确定啊,不同类加载器加载的类将被置于不同的命名空间

系统提供的类加载器是从本地磁盘加载 .class文件 的。如果，需要从远程网络或数据库中下载.class字节码文件，那就需要我们来挂载自定义的类加载器。

## 类加载器种类

1. BootStrapClassLoader(启动类加载器): 加载$JAVA_HOME/jre/lib下面的类库（或者通过参数-Xbootclasspath指定）
2. ExtClassLoader(扩展类加载器): 加载$JAVA_HOME/jre/lib/ext下的类库（或者通过参数-Djava.ext.dirs指定）
3. AppClassLoader(应用程序类加载器): 加载java环境变量CLASSPATH所指定的路径下的类库
4. CustomClassLoader(自定义类加载器)
5. ContextClassLoader(线程上下文类加载器)

## 双亲委派模型

某个特定的类加载器在接到加载类的请求时，首先将加载任务委托给父类加载器，依次递归，如果父类加载器可以完成类加载任务，就成功返回；只有父类加载器无法完成此加载任务时，才自己去加载。

![双亲委派模型](http://7xlgbq.com1.z0.glb.clouddn.com/双亲委派模型.png "双亲委派模型")

## 破坏双亲委派模型

va默认的线程上下文类加载器是 系统类加载器(AppClassLoader).

使用线程上下文类加载器, 可以在执行线程中, 抛弃双亲委派加载链模式, 使用线程上下文里的类加载器加载类.

大部分java app服务器(jboss, tomcat..)也是采用contextClassLoader来处理web服务


